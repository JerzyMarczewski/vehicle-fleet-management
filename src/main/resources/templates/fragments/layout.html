<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" class="min-vh-100 m-0 p-0">
<head th:replace="~{fragments/head :: head('Vehicle Fleet Management')}">
</head>
<body class="min-vh-100 vh-100 m-0 p-0">

<nav th:fragment="topNav" class="navbar navbar-expand-lg bg-primary border-bottom shadow-sm fixed-top">
    <div class="container-fluid d-flex justify-content-center position-relative">
        <a class="navbar-brand mx-auto" href="/">
            <p class="text-white mb-0">VEHICLE FLEET MANAGEMENT</p>
        </a>
    </div>
</nav>

<nav th:fragment="sideNav" class="fixed-start bg-dark-subtle h-100" style="width: 250px; top: 56px;">
    <div class="p-3">
        <ul class="nav flex-column">
            <li class="nav-item mb-2">
                <a class="nav-link text-dark" href="/">
                    <i class="fas fa-tachometer-alt me-2"></i> Dashboard
                </a>
            </li>
            <li class="nav-item mb-2">
                <a class="nav-link text-dark d-flex justify-content-between align-items-center"
                   data-bs-toggle="collapse"
                   href="#vehicleFlow"
                   role="button"
                   aria-expanded="false"
                   aria-controls="vehicleFlow">
                    <span>
                        <i class="fas fa-car me-2"></i> Vehicles
                    </span>
                    <i class="fas fa-chevron-down"></i>
                </a>
                <div class="collapse" id="vehicleFlow">
                    <ul class="nav flex-column ms-3 mt-2">
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="/vehicles">
                                <i class="fas fa-list me-2"></i> All Vehicles
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="/vehicles/add">
                                <i class="fas fa-plus me-2"></i> Add Vehicle
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="/vehicles/search-page">
                                <i class="fas fa-search me-2"></i> Find Vehicle
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
            <li class="nav-item mb-2">
                <a class="nav-link text-dark d-flex justify-content-between align-items-center"
                   data-bs-toggle="collapse"
                   href="#fuelLogFlow"
                   role="button"
                   aria-expanded="false"
                   aria-controls="vehicleFlow">
                    <span>
                        <i class="fas fa-gas-pump me-2"></i> Fuel Management
                    </span>
                    <i class="fas fa-chevron-down"></i>
                </a>
                <div class="collapse" id="fuelLogFlow">
                    <ul class="nav flex-column ms-3 mt-2">
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="/fuel-logs">
                                <i class="fas fa-list me-2"></i> All Fuel Logs
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="/fuel-logs/add">
                                <i class="fas fa-plus me-2"></i> Add Fuel Log
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="/fuel-logs/search-page">
                                <i class="fas fa-search me-2"></i> Find by Vehicle
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
            <li class="nav-item mb-2">
                <a class="nav-link text-dark d-flex justify-content-between align-items-center"
                   data-bs-toggle="collapse"
                   href="#driverFlow"
                   role="button"
                   aria-expanded="false"
                   aria-controls="driverFlow">
                    <span>
                        <i class="fas fa-user-tie me-2"></i> Drivers
                    </span>
                    <i class="fas fa-chevron-down"></i>
                </a>
                <div class="collapse" id="driverFlow">
                    <ul class="nav flex-column ms-3 mt-2">
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="/drivers">
                                <i class="fas fa-list me-2"></i> All Drivers
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="/drivers/add">
                                <i class="fas fa-plus me-2"></i> Add Driver
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
            <li class="nav-item mb-2">
                <a class="nav-link text-dark d-flex justify-content-between align-items-center"
                   data-bs-toggle="collapse"
                   href="#assignmentFlow"
                   role="button"
                   aria-expanded="false"
                   aria-controls="assignmentFlow">
        <span>
            <i class="fas fa-clipboard-list me-2"></i> Assignments
        </span>
                    <i class="fas fa-chevron-down"></i>
                </a>
                <div class="collapse" id="assignmentFlow">
                    <ul class="nav flex-column ms-3 mt-2">
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="/assignments">
                                <i class="fas fa-list me-2"></i> All Assignments
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="/assignments/add">
                                <i class="fas fa-plus me-2"></i> New Assignment
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="/assignments/active">
                                <i class="fas fa-clock me-2"></i> Active Assignments
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="/assignments/history">
                                <i class="fas fa-history me-2"></i> Assignment History
                            </a>
                        </li>
                    </ul>
                </div>
            </li>
        </ul>
    </div>
</nav>

<div th:fragment="mainContent(content)" class="min-vh-100 vh-100 d-flex flex-column bg-body m-0 p-0">
    <div th:replace="~{fragments/layout :: topNav}"></div>

    <div class="vh-100 d-flex mt-5">
        <div th:replace="~{fragments/layout :: sideNav}"></div>

        <div class="flex-grow-1 d-flex flex-column p-4">
            <div th:replace="~{fragments/messages :: messages}"></div>

            <div class="flex-grow-1 p-4">
                <div th:replace="${content}"></div>
            </div>
        </div>
    </div>
</div>
</body>
</html>